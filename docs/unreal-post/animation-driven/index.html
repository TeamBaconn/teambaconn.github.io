<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Unreal] Animation Driven System | BaconGameDev's Blog</title>
<meta name=keywords content="gas,game,unreal,animation"><meta name=description content="A general overview of animation-driven systems in game development, along with practical tips and implementation strategies for building them using GAS."><meta name=author content="Tuong Nguyen, aka Bacon"><link rel=canonical href=https://teambaconn.github.io/unreal-post/animation-driven/><link crossorigin=anonymous href=/assets/css/stylesheet.d935457c62478a4c55c92dfe831310ced76adab3a89a43e902d091b5294dfdb4.css integrity="sha256-2TVFfGJHikxVyS3+gxMQztdq2rOomkPpAtCRtSlN/bQ=" rel="preload stylesheet" as=style><link rel=icon href=https://teambaconn.github.io/logo.png><link rel=icon type=image/png sizes=16x16 href=https://teambaconn.github.io/logo16.png><link rel=icon type=image/png sizes=32x32 href=https://teambaconn.github.io/logo32.png><link rel=apple-touch-icon href=https://teambaconn.github.io/apple-touch-icon.png><link rel=mask-icon href=https://teambaconn.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://teambaconn.github.io/unreal-post/animation-driven/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-1FTRRSKLPF"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-1FTRRSKLPF")}</script><meta property="og:url" content="https://teambaconn.github.io/unreal-post/animation-driven/"><meta property="og:site_name" content="BaconGameDev's Blog"><meta property="og:title" content="[Unreal] Animation Driven System"><meta property="og:description" content="A general overview of animation-driven systems in game development, along with practical tips and implementation strategies for building them using GAS."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="unreal-post"><meta property="article:published_time" content="2025-04-02T17:19:13+07:00"><meta property="article:modified_time" content="2025-04-02T17:19:13+07:00"><meta property="article:tag" content="Gas"><meta property="article:tag" content="Game"><meta property="article:tag" content="Unreal"><meta property="article:tag" content="Animation"><meta property="og:image" content="https://teambaconn.github.io/posts/animation-driven/anim4.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://teambaconn.github.io/posts/animation-driven/anim4.png"><meta name=twitter:title content="[Unreal] Animation Driven System"><meta name=twitter:description content="A general overview of animation-driven systems in game development, along with practical tips and implementation strategies for building them using GAS."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Unreal-Posts","item":"https://teambaconn.github.io/unreal-post/"},{"@type":"ListItem","position":2,"name":"[Unreal] Animation Driven System","item":"https://teambaconn.github.io/unreal-post/animation-driven/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Unreal] Animation Driven System","name":"[Unreal] Animation Driven System","description":"A general overview of animation-driven systems in game development, along with practical tips and implementation strategies for building them using GAS.","keywords":["gas","game","unreal","animation"],"articleBody":"What is animation driven? Animation driven is a term usually refers to systems or mechanics where some aspects in a system are controlled directly by animations‚Äîrather than calculated through physics or pure code logic.\nAnimations essentially authorize the system to perform certain actions in-game such as moving, dealing damage, spawning hitboxes, performing grab attacks, picking up items‚Ä¶\nIf the animation gets interrupted, most of those events simply won‚Äôt trigger. I say most because sometimes, for balance reasons, a game might choose to ignore the interruption and still execute the event anyway.\nThe difference between animation-driven and logic-driven systems It all comes down to one question: Who's making the decision?\nLet‚Äôs take a simple AOE skill as an example and compare two different implementations:\nLogic-driven system:\n‚ÄúThe system plays the animation and drives the logic itself.‚Äù\nIn this setup, the skill system plays the animation, then waits for 0.4s before telling the damage system to apply AOE damage.\nAnimation-driven system:\n‚ÄúThe animation feeds data into the system and trigger the logics‚Äù\nHere, the skill system still plays the animation, but instead creating a timer to wait for 0.4s, it waits for the animation to notify the system when to apply damage, and how large / powerful the AOE should be. Usually for static data that doesn‚Äôt need to change in runtime (dynamic), it can be stored in the animation data for beter and centralized visualization (see the image below).\nWhen should you use an animation-driven system? TL;DR: If you‚Äôre making a Souls-like game just use it.\nYou should consider using animation-driven systems when:\nYou‚Äôre aiming for realistic gameplay where animation and logic need to be tightly synced Your animations vary in speed and that variation affects timing of gameplay events You want game designers to balance and tweak things visually, without the longgg config \u0026 test loop Honestly, creating new content in an animation-driven system is often much easier. You can see exactly what‚Äôs happening, and tweaking animations gives you immediate feedback on how the gameplay feels.\nEven better, moving some logic into animation assets lets game designers create and test content quickly, without needing a programmer to step in. That means faster iteration and more time for devs to focus on deeper systems or fixing that one annoying bug that only happens on Friday üòÖ.\nAnimation-Driven System in Unreal Implementation The image above is an example of how I think an animation-driven system should be implemented for Gameplay Ability System in Unreal.\nFor other systems, you can use the same approach, it just in different by names.\nI‚Äôve annotated the steps in the image, from start (ActivateAbility) to end (EndAbility). Here‚Äôs a breakdown:\nThe ability gets activated and plays a montage.\nUse the PlayMontageAndWait ability task from GAS as it already has built-in delegates and handles replication for multiplayer. The ability waits for one of the relevant montage events (OnCompleted, OnInterrupted, OnBlendOut) to end or cancel the ability. While the montage plays, any animation notify it hits will send data to a custom component called AnimationDrivenProxyComponent.\nThat component then broadcasts the OnDataReceiveDelegate delegate. The ability task binds to OnDataReceiveDelegate delegate in the AnimationDrivenProxyComponent to listen for notify data.\nMake sure it only listens to relevant data‚Äîsince multiple montages might be playing at once.\nFor example: if your animation-driven ability plays Montage A, then the task should only react to notify data coming from Montage A. Once the ability task receives the notify data, it drives the logic of the ability accordingly. Notes Animation Notifies and Notify States are STATELESS as they‚Äôre shared across animation instances, so only use them for static data.\nIf you need to listen to NotifyState tick functions, don‚Äôt flood AnimationDrivenProxyComponent with updates.\nInstead, only send NotifyBegin and NotifyEnd‚Äîlet the ability task handle ticking if needed. It‚Äôs more efficient that way.\nOn dedicated servers (not listen servers), skeletal meshes don‚Äôt tick, meaning no animation plays on the server-side.\nThus, if you‚Äôre spawning a hitbox on a moving socket (like a sword swing), it might just float there on the server.\nTo fix this, you‚Äôll need to force the mesh to tick pose during montage playback. Add this in your ACharacter constructor or BeginPlay:\n#ifdef WITH_SERVER_CODE GetMesh()-\u003eVisibilityBasedAnimTickOption = EVisibilityBasedAnimTickOption::OnlyTickMontagesAndRefreshBonesWhenPlayingMontages; #else // Default client setting GetMesh()-\u003eVisibilityBasedAnimTickOption = EVisibilityBasedAnimTickOption::OnlyTickPoseWhenRendered; #endif A notify placed at the very beginning of the animation is not guaranteed to fire immediately. If you do something like: Play Animation A ‚Üí Expect Notify to fire ‚Üí Check for that event in the same frame ‚Ä¶it might fail, because the notify may not trigger until the next animation tick. Solution: If the logic must happen right after playing the animation, don‚Äôt rely on the notify. Trigger it manually, or delay your logic by 1 frame. The notify that you put in the end will NOT be guaranteed to hit, since the animation could be interupted or blend out too early. Only Notify State will hit end if your animation finishes early (only if the NotifyBegin has already triggered). ","wordCount":"831","inLanguage":"en","image":"https://teambaconn.github.io/posts/animation-driven/anim4.png","datePublished":"2025-04-02T17:19:13+07:00","dateModified":"2025-04-02T17:19:13+07:00","author":{"@type":"Person","name":"Tuong Nguyen, aka Bacon"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://teambaconn.github.io/unreal-post/animation-driven/"},"publisher":{"@type":"Organization","name":"BaconGameDev's Blog","logo":{"@type":"ImageObject","url":"https://teambaconn.github.io/logo.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://teambaconn.github.io/ accesskey=h title="BaconGameDev's Blog (Alt + H)">BaconGameDev's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://teambaconn.github.io/unreal-post/ title="Unreal Engine"><span>Unreal Engine</span></a></li><li><a href=https://teambaconn.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://teambaconn.github.io/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://teambaconn.github.io/archives/ title=Archives><span>Archives</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://teambaconn.github.io/>Home</a>&nbsp;¬ª&nbsp;<a href=https://teambaconn.github.io/unreal-post/>Unreal-Posts</a></div><h1 class="post-title entry-hint-parent">[Unreal] Animation Driven System</h1><div class=post-meta><span title='2025-04-02 17:19:13 +0700 +07'>April 2, 2025</span>&nbsp;¬∑&nbsp;4 min&nbsp;¬∑&nbsp;Tuong Nguyen, aka Bacon</div></header><figure class=entry-cover><img loading=eager src=https://teambaconn.github.io/posts/animation-driven/anim4.png alt></figure><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#what-is-animation-driven aria-label="What is animation driven?">What is animation driven?</a><ul><li><a href=#the-difference-between-animation-driven-and-logic-driven-systems aria-label="The difference between animation-driven and logic-driven systems">The difference between animation-driven and logic-driven systems</a></li><li><a href=#when-should-you-use-an-animation-driven-system aria-label="When should you use an animation-driven system?">When should you use an animation-driven system?</a></li></ul></li><li><a href=#animation-driven-system-in-unreal aria-label="Animation-Driven System in Unreal">Animation-Driven System in Unreal</a><ul><li><a href=#implementation aria-label=Implementation>Implementation</a></li><li><a href=#notes aria-label=Notes>Notes</a></li></ul></li></ul></div></details></div><div class=post-content><h2 id=what-is-animation-driven>What is animation driven?<a hidden class=anchor aria-hidden=true href=#what-is-animation-driven>#</a></h2><figure><img loading=lazy src=/posts/animation-driven/anim1.png></figure><p><code>Animation driven</code> is a term usually refers to systems or mechanics where some aspects in a system are controlled directly by animations‚Äîrather than calculated through physics or pure code logic.</p><p>Animations essentially <strong>authorize</strong> the system to <em>perform</em> certain actions in-game such as moving, dealing damage, spawning hitboxes, performing grab attacks, picking up items&mldr;</p><p>If the animation gets interrupted, <strong>most</strong> of those events simply won‚Äôt trigger. I say <em>most</em> because sometimes, for balance reasons, a game might choose to ignore the interruption and still execute the event anyway.</p><hr><h3 id=the-difference-between-animation-driven-and-logic-driven-systems>The difference between <strong>animation-driven</strong> and <strong>logic-driven</strong> systems<a hidden class=anchor aria-hidden=true href=#the-difference-between-animation-driven-and-logic-driven-systems>#</a></h3><p>It all comes down to one question: <code>Who's making the decision?</code></p><p>Let‚Äôs take a simple AOE skill as an example and compare two different implementations:</p><figure><img loading=lazy src=/posts/animation-driven/anim3.png width=100%></figure><p><strong>Logic-driven system:</strong><br><em>‚ÄúThe system plays the animation and drives the logic itself.‚Äù</em></p><p>In this setup, the skill system plays the animation, then waits for 0.4s before telling the damage system to apply AOE damage.</p><hr><figure><img loading=lazy src=/posts/animation-driven/anim2.png width=100%></figure><p><strong>Animation-driven system:</strong><br><em>‚ÄúThe animation feeds data into the system and trigger the logics‚Äù</em></p><p>Here, the skill system still plays the animation, but instead creating a timer to wait for 0.4s, it waits for the animation to <strong>notify</strong> the system when to apply damage, and how large / powerful the AOE should be. Usually for static data that doesn&rsquo;t need to change in runtime (dynamic), it can be stored in the animation data for beter and centralized visualization (see the image below).</p><hr><h3 id=when-should-you-use-an-animation-driven-system>When should you use an animation-driven system?<a hidden class=anchor aria-hidden=true href=#when-should-you-use-an-animation-driven-system>#</a></h3><p><strong>TL;DR:</strong> If you&rsquo;re making a Souls-like game just use it.</p><p>You should consider using animation-driven systems when:</p><ul><li>You&rsquo;re aiming for realistic gameplay where animation and logic need to be tightly synced</li><li>Your animations vary in speed and that variation affects timing of gameplay events</li><li>You want game designers to balance and tweak things <strong>visually</strong>, without the longgg config & test loop</li></ul><figure><img loading=lazy src=/posts/animation-driven/anim4.png width=100%></figure><p>Honestly, creating new content in an animation-driven system is often <strong>much easier</strong>. You can see exactly what&rsquo;s happening, and tweaking animations gives you immediate feedback on how the gameplay feels.</p><p>Even better, moving some logic into animation assets lets game designers create and test content quickly, without needing a programmer to step in. That means faster iteration and more time for devs to focus on deeper systems or fixing that one annoying bug that only happens on Friday üòÖ.</p><h2 id=animation-driven-system-in-unreal>Animation-Driven System in Unreal<a hidden class=anchor aria-hidden=true href=#animation-driven-system-in-unreal>#</a></h2><h3 id=implementation>Implementation<a hidden class=anchor aria-hidden=true href=#implementation>#</a></h3><figure><img loading=lazy src=/posts/animation-driven/anim5.png width=100%></figure><p>The image above is an example of how I think an animation-driven system should be implemented for <strong>Gameplay Ability System</strong> in Unreal.<br>For other systems, you can use the same approach, it just in different by names.</p><p>I&rsquo;ve annotated the steps in the image, from start <em>(ActivateAbility)</em> to end <em>(EndAbility)</em>. Here&rsquo;s a breakdown:</p><blockquote><ol><li>The ability gets activated and plays a montage.<br>Use the <code>PlayMontageAndWait</code> ability task from GAS as it already has built-in delegates and handles replication for multiplayer.</li></ol></blockquote><blockquote><ol start=2><li>The ability waits for one of the relevant montage events (<code>OnCompleted</code>, <code>OnInterrupted</code>, <code>OnBlendOut</code>) to end or cancel the ability.</li></ol></blockquote><blockquote><ol start=3><li>While the montage plays, any animation notify it hits will send data to a custom component called <code>AnimationDrivenProxyComponent</code>.<br>That component then broadcasts the <code>OnDataReceiveDelegate</code> delegate.</li></ol></blockquote><blockquote><ol start=4><li>The ability task binds to <code>OnDataReceiveDelegate</code> delegate in the <code>AnimationDrivenProxyComponent</code> to listen for notify data.<br>Make sure it only listens to relevant data‚Äîsince multiple montages might be playing at once.<br><br><strong>For example:</strong> if your animation-driven ability plays Montage A, then the task should only react to notify data coming from Montage A.</li></ol></blockquote><blockquote><ol start=5><li>Once the ability task receives the notify data, it drives the logic of the ability accordingly.</li></ol></blockquote><hr><h3 id=notes>Notes<a hidden class=anchor aria-hidden=true href=#notes>#</a></h3><ul><li><p><strong>Animation Notifies</strong> and <strong>Notify States</strong> are <strong>STATELESS</strong> as they&rsquo;re shared across animation instances, so only use them for static data.</p></li><li><p>If you need to listen to <code>NotifyState</code> tick functions, <strong>don‚Äôt flood</strong> <code>AnimationDrivenProxyComponent</code> with updates.<br>Instead, only send <strong>NotifyBegin</strong> and <strong>NotifyEnd</strong>‚Äîlet the ability task handle ticking if needed. It‚Äôs more efficient that way.</p></li><li><p>On <strong>dedicated servers</strong> (not listen servers), skeletal meshes don&rsquo;t tick, meaning no animation plays on the server-side.<br>Thus, if you‚Äôre spawning a hitbox on a moving socket (like a sword swing), it might just float there on the server.<br>To fix this, you‚Äôll need to force the mesh to tick pose during montage playback. Add this in your <code>ACharacter</code> constructor or <code>BeginPlay</code>:</p></li></ul><div class=highlight><pre tabindex=0 class=chroma><code class=language-c data-lang=c><span class=line><span class=cl><span class=cp>#ifdef WITH_SERVER_CODE
</span></span></span><span class=line><span class=cl><span class=cp></span>    <span class=nf>GetMesh</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>VisibilityBasedAnimTickOption</span> <span class=o>=</span> <span class=n>EVisibilityBasedAnimTickOption</span><span class=o>::</span><span class=n>OnlyTickMontagesAndRefreshBonesWhenPlayingMontages</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#else
</span></span></span><span class=line><span class=cl><span class=cp></span>    <span class=c1>// Default client setting
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nf>GetMesh</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>VisibilityBasedAnimTickOption</span> <span class=o>=</span> <span class=n>EVisibilityBasedAnimTickOption</span><span class=o>::</span><span class=n>OnlyTickPoseWhenRendered</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=cp>#endif
</span></span></span></code></pre></div><ul><li>A notify placed at the very beginning of the animation is not guaranteed to fire immediately.
If you do something like:<br><br><em>Play Animation A ‚Üí Expect Notify to fire ‚Üí Check for that event in the same frame</em><br><br>‚Ä¶it might fail, because the notify may not trigger until the next animation tick.<br><br><strong>Solution:</strong> If the logic must happen right after playing the animation, don‚Äôt rely on the notify. Trigger it manually, or delay your logic by 1 frame.</li><li>The notify that you put in the end will <strong>NOT</strong> be guaranteed to hit, since the animation could be interupted or blend out too early. Only Notify State will hit end if your animation finishes early (only if the NotifyBegin has already triggered).</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://teambaconn.github.io/tags/gas/>Gas</a></li><li><a href=https://teambaconn.github.io/tags/game/>Game</a></li><li><a href=https://teambaconn.github.io/tags/unreal/>Unreal</a></li><li><a href=https://teambaconn.github.io/tags/animation/>Animation</a></li></ul><nav class=paginav><a class=prev href=https://teambaconn.github.io/unreal-post/ai-notes/><span class=title>¬´ Prev</span><br><span>Ai Notes</span>
</a><a class=next href=https://teambaconn.github.io/unreal-post/gameplay-tag/><span class=title>Next ¬ª</span><br><span>[Unreal] Using Gameplay Tags with GAS</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://teambaconn.github.io/>BaconGameDev's Blog</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>